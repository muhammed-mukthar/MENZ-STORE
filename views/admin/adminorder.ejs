<%-include('../include/adminheader.ejs')-%>

  <body>
    
    <nav class="navbar navbar-expand-lg navbackground mb-5">
      <div class="container-fluid ">
        <a class="navbar-brand" href="/admin">Admin </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse justify-content-center" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link "  href="/admin">dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" aria-current="page" href="/admin/orders">Orders</a>
            </li>
            <li class="nav-item">
              <a class="nav-link "  href="/admin/products">Products</a>
            </li>
            <li class="nav-item">
              <a href="/admin/usermanagement" class="nav-link ">Users</a>
            </li>
            <li class="nav-item">
              <a href="/admin/category" class="nav-link ">Category</a>
            </li>
            <li class="nav-item">
              <a href="/admin/logout" class="nav-link ">Sign out</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>


    <section  class="container h-100 mt-4  ">
      <h2 class="text-center">Order History</h2>
      <div class="row mb-2">
        <div class="d-flex justify-content-between">
           <div class="d-flex"> <p class="input-group-addon fw-300 m-2">Search Products</p>
        
              <input id="filter" type="text" class="col-4 m-2 " placeholder="Search...">
        </div>
      
        </div>
       
        </div>
      <div class="  table-responsive">
        <table class="table shadow  ">
          <thead class="table-dark">
            <tr>
              <th scope="col"> Date</th>
              <th scope="col">address </th>
              <th scope="col">payment Method</th>

              <th scope="col">Amount</th>
      
              <th scope="col">product details</th>
       
              <th scope="col">user details</th>
              <th scope="col">Status</th>
              <th scope="col">Order Status</th>
          
            </tr>
          </thead>
          <tbody class="searchable">
            
            <% for ( let i=0; i < orderinfo.length; i++){ %>
            
            <tr>
            
              <td><%=orderinfo[i].date.toLocaleDateString()%></td>
                   
                   
                    <td><%=orderinfo[i].deliveryDetails.address1%></td> 
                      <td><%=orderinfo[i].paymentMethod%></td>
                      <td>Rs<%=orderinfo[i].totalAmount%></td>
                      <td><a class="btn btn-primary" href="/admin/orderedproducts/<%=orderinfo[i]._id%>">products</a></td>
                      <td><a class="btn btn-primary" href="/admin/userinfo/<%=orderinfo[i]._id%>">user Info</a></td>
                      <td><%=orderinfo[i].status%></td>
                      <% if(orderinfo[i].status =='cancelled'){%>
                        <td><p class="text-danger">Order has been cancelled</p></td>
                        <%}else if(orderinfo[i].status =='delivered'){%>
                          <td><p class="text-success">Order has been delivered</p></td>

                          <%}else{%>
                       <td>
                        <form action="/admin/orderstatus/<%=orderinfo[i]._id%>" method="post">
                        <select class="" name="status" id="size">
                        <option value="<%=orderinfo[i].status%>" selected><%=orderinfo[i].status%></option>
                        <option value="cancelled">cancelled</option>
                        <option value="shipped">shipped</option>
                        <option value="out for delivery">out for delivery</option>
                        <option value="delivered">delivered</option>
                      </select>
                  
                    <button class="btn btn-success" type="submit">submit</button>
                </form>
            </td> 
            <%}%>
            </tr>
            <%}%>
        
          </tbody>
        </table>
      </div>
    </section>
<!-- 
    
    
    <section>
      <div class="container mt-3">

          <table id="example" class="display responsive nowrap" style="width:100%">
            <thead class="theadclass">
              <%if(message){%>
                <%=message.message%>
                <%}%>
              <tr>
                 
                    <th scope="col"> Date</th>
                    <th scope="col">address </th>
                    <th scope="col">payment Method</th>

                    <th scope="col">Amount</th>
            
                    <th scope="col">product details</th>
             
                    <th scope="col">user details</th>
                    <th scope="col">Status</th>
                    <th scope="col">Order Status</th>
                  
              </tr>
                </thead>
                <tbody>
                
                  <% for ( let i=0; i < orderinfo.length; i++){ %>
                
                  <tr>
                   
                    <td><%=orderinfo[i].date.toLocaleDateString()%></td>
                   
                   
                    <td><%=orderinfo[i].deliveryDetails.address1%></td> 
                      <td><%=orderinfo[i].paymentMethod%></td>
                      <td>Rs<%=orderinfo[i].totalAmount%></td>
                      <td><a class="btn btn-primary" href="/admin/orderedproducts/<%=orderinfo[i]._id%>">products</a></td>
                      <td><a class="btn btn-primary" href="/admin/userinfo/<%=orderinfo[i]._id%>">user Info</a></td>
                      <td><%=orderinfo[i].status%></td>
                      <% if(orderinfo[i].status =='cancelled'){%>
                        <td><p class="text-danger">Order has been cancelled</p></td>
                        <%}else if(orderinfo[i].status =='delivered'){%>
                          <td><p class="text-success">Order has been delivered</p></td>

                          <%}else{%>
                       <td>
                        <form action="/admin/orderstatus/<%=orderinfo[i]._id%>" method="post">
                        <select class="" name="status" id="size">
                        <option value="<%=orderinfo[i].status%>" selected><%=orderinfo[i].status%></option>
                        <option value="cancelled">cancelled</option>
                        <option value="shipped">shipped</option>
                        <option value="out for delivery">out for delivery</option>
                        <option value="delivered">delivered</option>
                      </select>
                  
                    <button class="btn btn-success" type="submit">submit</button>
                </form>
            </td> 
            <%}%>
        
                  </tr>
              <%}%>
                </tbody>
                
     
        </table>
        
      </div>

</section>
 -->



<%-include('../include/adminresfooter.ejs')-%>